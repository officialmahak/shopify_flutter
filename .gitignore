from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

# Replace with the path to your ChromeDriver
driver_path = '/path/to/chromedriver'
driver = webdriver.Chrome(executable_path=driver_path)

# Open your WooCommerce site
driver.get('https://cosmcare.com')

# Add a product to the cart
product_page_url = 'https://cosmcare.com/product-page'
driver.get(product_page_url)

# Wait for the add to cart button to be clickable and then click it
add_to_cart_button = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'button.single_add_to_cart_button'))
)
add_to_cart_button.click()

# Go to the cart page
cart_page_url = 'https://cosmcare.com/cart'
driver.get(cart_page_url)

# Proceed to checkout
checkout_button = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.CSS_SELECTOR, 'a.checkout-button'))
)
checkout_button.click()

# Fill in the checkout form
first_name = driver.find_element(By.ID, 'billing_first_name')
first_name.send_keys('John')

last_name = driver.find_element(By.ID, 'billing_last_name')
last_name.send_keys('Doe')

address = driver.find_element(By.ID, 'billing_address_1')
address.send_keys('123 Main Street')

city = driver.find_element(By.ID, 'billing_city')
city.send_keys('Anytown')

postcode = driver.find_element(By.ID, 'billing_postcode')
postcode.send_keys('12345')

phone = driver.find_element(By.ID, 'billing_phone')
phone.send_keys('1234567890')

email = driver.find_element(By.ID, 'billing_email')
email.send_keys('john.doe@example.com')

# Select a payment method (assuming you have a payment method with the ID 'payment_method_cod')
payment_method = driver.find_element(By.ID, 'payment_method_cod')
payment_method.click()

# Place the order
place_order_button = WebDriverWait(driver, 10).until(
    EC.element_to_be_clickable((By.ID, 'place_order'))
)
place_order_button.click()

# Wait for the confirmation page to load
WebDriverWait(driver, 10).until(
    EC.presence_of_element_located((By.CSS_SELECTOR, '.woocommerce-thankyou-order-received'))
)

print('Order placed successfully!')

# Close the browser
driver.quit()
